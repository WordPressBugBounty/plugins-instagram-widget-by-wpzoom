(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}!function(){var t="product-links",a="moderate",o="wpz-insta-product-links-tab-active",r="wpz-insta-moderate-tab-active",n=["grid","fullwidth","masonry","carousel"];function i(e){e?document.body.classList.add(o):document.body.classList.remove(o)}function s(e){e?document.body.classList.add(r):document.body.classList.remove(r)}function l(e){if(null==e)return!1;if("boolean"==typeof e)return e;var t=String(e).toLowerCase();return"1"===t||"true"===t||"yes"===t||"on"===t}function d(){if(p){var t=document.querySelector(".zoom-new-instagram-widget .zoom-instagram");if(t){var a=function(t){if(!t||"object"!==e(t))return 3;var a=l(t["col-num_responsive-enabled"]),o=parseInt(t["col-num"],10),r=parseInt(t["col-num_tablet"],10),n=parseInt(t["col-num_mobile"],10);if((isNaN(o)||o<0)&&(o=3),(isNaN(r)||r<0)&&(r=2),(isNaN(n)||n<0)&&(n=1),!a)return o;var i=window.innerWidth;return i>768?o:i>480?r:n}(p);[].slice.call(t.classList).forEach(function(e){0===e.indexOf("columns-")&&t.classList.remove(e)}),t.classList.add("columns-"+a);var o=parseInt(p.layout,10),r=!isNaN(o)&&o>=0&&o<n.length?n[o]:"";if("grid"===r||"masonry"===r){var i=t.querySelector(".zoom-instagram-widget__items");i&&i.style&&(i.style.gridTemplateColumns="repeat("+a+", 1fr)")}}}}var c,p=null;function u(t){if(p=t,t&&"object"===e(t)){var a=document.querySelector(".zoom-new-instagram-widget .zoom-instagram");if(a){var o=parseInt(t.layout,10);if(!isNaN(o)&&o>=0&&o<n.length){var r=n[o],i="masonry"===r,s="carousel"===r;i?a.classList.add("wpz-insta-preview-masonry"):a.classList.remove("wpz-insta-preview-masonry");var c=a.querySelector(".zoom-instagram-widget__items-wrapper"),u=a.querySelector(".wpz-insta-preview-masonry-notice");i?(u||((u=document.createElement("p")).className="wpz-insta-preview-masonry-notice",c&&c.parentNode&&c.parentNode.insertBefore(u,c)),u.textContent="This preview shows a grid for reference. The masonry layout will be applied on your live site.",u.style.display=""):u&&(u.style.display="none");var m=a.querySelector(".wpz-insta-preview-carousel-notice");s?(m||((m=document.createElement("p")).className="wpz-insta-preview-carousel-notice",c&&c.parentNode&&c.parentNode.insertBefore(m,c)),m.textContent="The carousel slider will be applied on your live site. This preview shows a static layout for reference.",m.style.display=""):m&&(m.style.display="none"),n.forEach(function(e){a.classList.remove("layout-"+e)}),a.classList.add("layout-"+r),n.forEach(function(e){document.body.classList.remove("page-layout-"+e)}),document.body.classList.add("page-layout-"+r);var y=a.querySelector(".zoom-instagram-widget__items");if(y&&y.style){var g="masonry"===r?"grid":r;n.forEach(function(e){y.classList.remove("layout-"+e)}),y.classList.add("layout-"+g),y.classList.toggle("swiper-wrapper","carousel"===r);var w=parseInt(t["item-num"],10);(isNaN(w)||w<1)&&(w=6);var f=parseInt(t["perpage-num"],10);(isNaN(f)||f<1)&&(f=3),"grid"===r||"masonry"===r?(y.style.display="grid",y.style.removeProperty("--wpz-insta-perpage")):"fullwidth"===r?(y.style.display="grid",y.style.gridTemplateColumns="repeat("+w+", 1fr)",y.style.removeProperty("--wpz-insta-perpage")):"carousel"===r?(y.style.display="flex",y.style.gridTemplateColumns="",y.style.setProperty("--wpz-insta-perpage",String(f))):(y.style.display="",y.style.gridTemplateColumns="",y.style.removeProperty("--wpz-insta-perpage"))}var v=a.querySelector(".zoom-instagram-widget__items-wrapper");v&&v.classList.toggle("swiper","carousel"===r)}d();var h=parseFloat(t["spacing-between"],10),z=a.querySelector(".zoom-instagram-widget__items");if(z&&z.style)if(!isNaN(h)&&h>=0){var b={0:"px",1:"em",2:"%"}[parseInt(t["spacing-between-suffix"],10)]||"px";z.style.setProperty("gap",h+b,"important")}else z.style.removeProperty("gap");var L=l(t["featured-layout-enable"]),_=parseInt(t["featured-layout"],10);a.classList.toggle("featured-layout",L&&_>0),[].slice.call(a.classList).forEach(function(e){0===e.indexOf("featured-layout-")&&a.classList.remove(e)}),L&&_>0&&a.classList.add("featured-layout-"+_);var S=a.querySelector(".zoom-instagram-widget__header");if(S){var q=S.querySelector(".zoom-instagram-widget__header-name");q&&(q.style.display=l(t["show-account-name"])?"":"none");var x=S.querySelector(".zoom-instagram-widget__header-user");x&&(x.style.display=l(t["show-account-username"])?"":"none");var P=S.querySelector(".wpz-insta-stats");P&&(P.style.display=l(t["show-account-stats"])?"":"none");var I=S.querySelector(".wpz-insta-stories");I&&(I.style.display=l(t["show-stories"])?"":"none");var k=S.querySelector(".zoom-instagram-widget__header-column-left");k&&(k.style.display=l(t["show-account-image"])?"":"none");var A=S.querySelector(".zoom-instagram-widget__header-bio");A&&(A.style.display=l(t["show-account-bio"])?"":"none")}var E=a.querySelector(".wpz-insta-badge");E&&E.style.setProperty("display",l(t["show-account-badge"])?"":"none","important");var N=a.querySelector(".wpz-insta-view-on-insta-button");if(N){if(N.style.display=l(t["show-view-button"])?"":"none",t["view-button-text"]){var C=N.lastChild;C&&3===C.nodeType&&(C.textContent=" "+t["view-button-text"])}null!=t["view-button-bg-color"]&&""!==t["view-button-bg-color"]?N.style.setProperty("background-color",t["view-button-bg-color"],"important"):N.style.removeProperty("background-color")}if(null!=t["bg-color"]&&""!==t["bg-color"]?a.style.setProperty("background-color",t["bg-color"],"important"):a.style.removeProperty("background-color"),t["font-size"]){var T={0:"px",1:"em",2:"pt"}[parseInt(t["font-size-suffix"],10)]||"px";a.style.fontSize=t["font-size"]+T}if(void 0!==t["spacing-around"]&&""!==t["spacing-around"]){var H={0:"px",1:"em",2:"%"}[parseInt(t["spacing-around-suffix"],10)]||"px";a.style.setProperty("padding",t["spacing-around"]+H,"important")}else a.style.removeProperty("padding");var M=a.querySelector(".wpzinsta-pro-load-more-wrapper");M&&(M.style.display=l(t["show-load-more"])?"":"none");var j=a.querySelector(".wpzinsta-pro-load-more-btn")||a.querySelector(".wpz-insta-multi-load-more");if(j){var U=j.querySelector(".button-text");t["load-more-text"]&&((U||j).textContent=t["load-more-text"]),null!=t["load-more-color"]&&""!==t["load-more-color"]?j.style.setProperty("background-color",t["load-more-color"],"important"):j.style.removeProperty("background-color")}var B=o>=0&&o<n.length?n[o]:"grid",D=(t["image-aspect-ratio"]||"square").toLowerCase(),F="1";"grid"===B&&(F="portrait"===D?"3/4":"1/1"),a.querySelectorAll(".zoom-instagram-widget__item img:not(.wpz-insta-product-popover-item-img)").forEach(function(e){e.style.setProperty("aspect-ratio",F,"important")});var O=a.querySelectorAll(".zoom-instagram-widget__item-inner-wrap");O.forEach(function(e){e.classList.toggle("aspect-portrait","grid"===B&&"portrait"===D),e.classList.toggle("aspect-square","grid"===B&&"portrait"!==D)});var Z=parseFloat(t["border-radius"],10),R={0:"px",1:"em",2:"%"}[parseInt(t["border-radius-suffix"],10)]||"px";O.forEach(function(e){!isNaN(Z)&&Z>=0?e.style.setProperty("border-radius",Z+R,"important"):e.style.removeProperty("border-radius")}),a.querySelectorAll(".zoom-instagram-widget__item").forEach(function(e){e.classList.toggle("media-icons-normal",l(t["show-media-type-icons"])),e.classList.toggle("media-icons-hover",l(t["hover-media-type-icons"])),e.classList.toggle("date-hover",l(t["hover-date"]))});var V=l(t["show-overlay"]);a.querySelectorAll(".zoom-instagram-widget__overlay").forEach(function(e){e.style.display=V?"":"none"}),"function"==typeof window.parent.wpzInstaUpdatePreviewHeight&&requestAnimationFrame(function(){window.parent.wpzInstaUpdatePreviewHeight()})}}}function m(){var e=document.querySelector(".wpzinsta-pro-load-more-btn");if(e){var t=parseInt(e.getAttribute("data-cache-offset")||"0",10);if(!t||t<1){var a=document.querySelectorAll(".zoom-instagram-widget__item");t=a.length}e.addEventListener("click",function(a){if(a.preventDefault(),a.stopImmediatePropagation(),!e.classList.contains("loading")&&!e.disabled){var o=e.getAttribute("data-feed-id")||"",r=parseInt(e.getAttribute("data-item-amount")||"9",10),n=e.getAttribute("data-image-size")||"standard_resolution",i="undefined"!=typeof wpzInstaPreview&&wpzInstaPreview.ajaxurl?wpzInstaPreview.ajaxurl:"undefined"!=typeof wpzInstaAjax?wpzInstaAjax.ajaxurl:"",s="undefined"!=typeof wpzInstaPreview&&wpzInstaPreview.nonce?wpzInstaPreview.nonce:"";if(i&&o&&s){var l=e.closest(".wpzinsta-pro-load-more-wrapper");l&&l.classList.add("loading"),e.classList.add("loading"),e.disabled=!0;var d=e.querySelector(".button-text"),c=d?d.textContent:"";d&&(d.textContent="Loading...");var m=new URLSearchParams(window.location.search||"").get("_wpz-insta_user-id")||"",y=new FormData;y.append("action","wpzoom_instagram_preview_load_more"),y.append("feed_id",o),y.append("offset",t),y.append("amount",r),y.append("image_size",n),y.append("_wpnonce",s),m&&y.append("user_id",m),fetch(i,{method:"POST",body:y,credentials:"same-origin"}).then(function(e){return e.json()}).then(function(a){if(a.success&&a.data&&a.data.html){var o=document.querySelector(".zoom-instagram-widget__items");if(o){var n=o.querySelectorAll(".zoom-instagram-widget__item").length;o.insertAdjacentHTML("beforeend",a.data.html);for(var i=o.querySelectorAll(".zoom-instagram-widget__item"),s=n;s<i.length;s++)i[s].classList.add("wpz-insta-ajax-loaded-item");var l=[];for(s=n;s<i.length;s++)l.push(i[s]);l.forEach(function(e){var t=e.querySelector("img.zoom-instagram-link, img.zoom-instagram-link-new");t?t.complete&&t.naturalWidth>0?e.classList.add("wpz-insta-loaded"):(t.addEventListener("load",function(){e.classList.add("wpz-insta-loaded")}),t.addEventListener("error",function(){e.classList.add("wpz-insta-loaded")})):e.classList.add("wpz-insta-loaded")})}t=a.data.offset||t+r,a.data.has_more||(e.style.display="none"),"function"==typeof window.parent.wpzInstaUpdatePreviewHeight&&requestAnimationFrame(function(){window.parent.wpzInstaUpdatePreviewHeight()}),p&&u(p)}else e.style.display="none"}).catch(function(){e.style.display="none"}).finally(function(){l&&l.classList.remove("loading"),e.classList.remove("loading"),e.disabled=!1,d&&(d.textContent=c)})}}},!0)}}function y(){var e=document.querySelector(".zoom-new-instagram-widget .zoom-instagram");if(e)for(var t=0;t<n.length;t++)if(e.classList.contains("layout-"+n[t]))return n.forEach(function(e){document.body.classList.remove("page-layout-"+e)}),void document.body.classList.add("page-layout-"+n[t])}i((c=new URLSearchParams(window.location.search||"").get("wpz-insta-tab")||"")===t),s(c===a),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m(),document.addEventListener("click",function(e){var t=e.target.closest(".wpz-insta-moderate-btn");if(t){e.preventDefault(),e.stopPropagation();var a=t.getAttribute("data-media-id")||"";a&&window.parent&&window.parent.postMessage({action:"wpz-insta-toggle-visibility",mediaId:a},"*")}}),window.addEventListener("message",function(e){var o,r;e.data&&("wpz-insta-tab-change"===e.data.action?(i(e.data.tab===t),s(e.data.tab===a)):"wpz-insta-preview-update"===e.data.action&&e.data.data?u(e.data.data):"wpz-insta-product-link-update"===e.data.action?(o=e.data.mediaId,r=e.data.hasLinks,o&&document.querySelectorAll(".zoom-instagram-widget__item").forEach(function(e){var t=!1,a=e.querySelector(".wpz-insta-link-product-btn");if(a&&(a.getAttribute("data-media-id")||"")===o&&(t=!0),!t){var n=e.querySelector(".zoom-instagram-link");n&&(n.getAttribute("data-mfp-src")||"")===o&&(t=!0)}if(t){e.classList.toggle("has-linked-products",r),a&&(a.classList.toggle("wpz-insta-link-product-btn--linked",r),r?(a.innerHTML='<span class="dashicons dashicons-edit"></span> Edit Product Link',a.setAttribute("title","Edit Product Link")):(a.innerHTML='<span class="dashicons dashicons-cart"></span> Link to a product',a.setAttribute("title","Link to a product")));var i=e.querySelector(".wpz-insta-product-badge");if(i)i.style.display=r?"":"none";else if(r){var s=e.querySelector(".zoom-instagram-widget__item-inner-wrap");if(s){var l=document.createElement("span");l.className="wpz-insta-product-badge",l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 0 0 4.25 22.5h15.5a1.875 1.875 0 0 0 1.865-2.071l-1.263-12a1.875 1.875 0 0 0-1.865-1.679H16.5V6a4.5 4.5 0 1 0-9 0ZM12 3a3 3 0 0 0-3 3v.75h6V6a3 3 0 0 0-3-3Zm-3 8.25a3 3 0 1 0 6 0v-.75a.75.75 0 0 1 1.5 0v.75a4.5 4.5 0 1 1-9 0v-.75a.75.75 0 0 1 1.5 0v.75Z" clip-rule="evenodd" /></svg>Product',s.appendChild(l)}}}})):"wpz-insta-moderate-update"===e.data.action&&function(e,t){e&&document.querySelectorAll(".zoom-instagram-widget__item").forEach(function(a){var o=a.querySelector(".wpz-insta-moderate-btn");o&&(o.getAttribute("data-media-id")||"")===e&&(a.classList.toggle("wpz-insta-post-hidden",t),t?(o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>',o.setAttribute("title","Show post")):(o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>',o.setAttribute("title","Hide post")))})}(e.data.mediaId,e.data.hidden))}),window.addEventListener("resize",function(){d()}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",y):y()}(),document.body.addEventListener("load",function(e){"IMG"==e.target.tagName&&e.target.closest(".zoom-instagram-widget__item")&&"function"==typeof window.parent.wpzInstaUpdatePreviewHeight&&window.parent.wpzInstaUpdatePreviewHeight()},!0)})();