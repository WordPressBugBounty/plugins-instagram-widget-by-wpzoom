(()=>{function t(i){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(i)}function i(i,e,a){return(e=function(i){var e=function(i){if("object"!=t(i)||!i)return i;var e=i[Symbol.toPrimitive];if(void 0!==e){var a=e.call(i,"string");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}(i);return"symbol"==t(e)?e:e+""}(e))in i?Object.defineProperty(i,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[e]=a,i}!function(e){function a(){e(".zoom-instagram-widget__items").each(function(){e(this).find(".zoom-instagram-widget__item").each(function(){var t=e(this);if(!t.hasClass("wpz-insta-loaded")&&!t.data("shimmer-init")){t.data("shimmer-init",!0);var i=t.find("img.zoom-instagram-link, img.zoom-instagram-link-new").first();0!==i.length?i[0].complete&&i[0].naturalWidth>0?t.addClass("wpz-insta-loaded"):(i.on("load.shimmer",function(){t.addClass("wpz-insta-loaded")}),i.on("error.shimmer",function(){t.addClass("wpz-insta-loaded")})):t.addClass("wpz-insta-loaded")}})})}e(document).ready(function(){a()}),window.wpzInstaImageShimmerInit=a,e(window).on("load",function(){var n=!1;function o(){e(".wpzinsta-pro-load-more-btn").off("click.loadmore").on("click.loadmore",function(n){n.preventDefault();var o=e(this),s=o.closest(".wpzinsta-pro-load-more-wrapper"),r=o.closest(".zoom-instagram"),d=r.find(".zoom-instagram-widget__items");if("true"!==s.attr("data-disabled")&&!o.prop("disabled")&&!o.hasClass("loading")){var l=o.attr("data-feed-id"),c=o.attr("data-item-amount"),p=o.attr("data-image-size"),m=o.attr("data-allowed-post-types"),g=o.attr("data-next-url"),f=o.attr("data-nonce"),u=parseInt(o.attr("data-cache-offset")||"-1",10);if(u<0&&!g)o.hide();else{o.addClass("loading").prop("disabled",!0),s.addClass("loading");var w=o.find(".button-text").text();o.find(".button-text").text("Loading...");var h=-1!==window.location.search.indexOf("wpz-insta-widget-preview"),z={action:"wpzoom_instagram_load_more",feed_id:l,item_amount:c,image_size:p,allowed_post_types:m,next:g,_wpnonce:f};u>=0&&(z.cache_offset=u),h&&(z.preview=1),e.ajax({url:wpzInstaAjax.ajaxurl,type:"POST",dataType:"json",data:z,success:function(n){if(n.success&&n.data.html){var s=d.find("li").length;if(d.append(n.data.html),n.data.has_more?(void 0!==n.data.cache_offset&&n.data.cache_offset>=0?o.attr("data-cache-offset",n.data.cache_offset):o.attr("data-cache-offset","-1"),n.data.next_url&&o.attr("data-next-url",n.data.next_url)):o.hide(),d.zoomLoadAsyncImages(),a(),d.hasClass("layout-masonry"))if("function"==typeof e.fn.masonry){var l=d.find("li").slice(s);d.data("masonry")||d.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(d.data("spacing")||10)}),d.masonry("appended",l)}else setTimeout(function(){d.zoomInstagramWidget({onlyNewItems:!0,startIndex:s})},100);else setTimeout(function(){d.zoomInstagramWidget({onlyNewItems:!0,startIndex:s})},100);if("1"===d.attr("data-lightbox")&&n.data.lightbox_html){var c=r.find(".wpz-insta-lightbox-wrapper .swiper-wrapper");if(c.length>0){c.append(n.data.lightbox_html);var p=c.parent();p.length>0&&p.get(0).swiper&&p.get(0).swiper.update(),c.find(".image-wrapper > .swiper").each(function(){if(!this.swiper){var t=e(this),a=t.closest(".image-wrapper");new Swiper(this,i(i(i(i(i(i(i(i(i(i({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"nested",!0),"watchOverflow",!0),"pagination",{el:t.find("> .swiper-pagination").get(0),type:"bullets",clickable:!0,hideOnClick:!1}),"navigation",{nextEl:t.find("> .swiper-button-next").get(0),prevEl:t.find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{init:function(){"function"==typeof window.wpzInstaUpdateProductTagVisibility&&window.wpzInstaUpdateProductTagVisibility(a,0)},activeIndexChange:function(){var t=this.slides[this.activeIndex],i=e(t).find("video").get(0);i&&i.play(),"function"==typeof window.wpzInstaUpdateProductTagVisibility&&window.wpzInstaUpdateProductTagVisibility(a,this.activeIndex)}}))}});var m=d.find("li").slice(s).find(".zoom-instagram-link");m.length>0&&(m.magnificPopup({items:{type:"inline",src:c.closest(".wpz-insta-lightbox-wrapper")},closeBtnInside:!1,mainClass:"wpzoom-lightbox",midClick:!0,callbacks:{open:function(){var i=e.magnificPopup.instance.st.el,a=this.content.find("> .swiper").get(0).swiper;if(this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+i.data("mfp-src")+'"] video')&&this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+i.data("mfp-src")+'"] video').trigger("play"),"object"===t(a)){var n=this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+i.data("mfp-src")+'"]').index();a.slideTo(n)}},afterClose:function(){p.find("video").each(function(){this.pause(),this.currentTime=0})}}}),m.addClass("magnific-active"))}else d.zoomLightbox()}r.trigger("wpz-insta:loaded-more",[n.data])}else console.error("Load more failed:",n.data||"Unknown error"),o.hide()},error:function(t,i,e){console.error("AJAX load more error:",e),o.hide()},complete:function(){o.removeClass("loading").prop("disabled",!1),s.removeClass("loading"),o.find(".button-text").text(w)}})}}})}function s(){e(".zoom-instagram-widget__items").each(function(){var t=e(this);t.hasClass("layout-masonry")&&"function"==typeof e.fn.masonry?t.data("masonry")?t.masonry("layout"):t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()}),n=!1}a(),o(),e.fn.zoomLoadAsyncImages=function(){return-1!==window.location.search.indexOf("wpz-insta-widget-preview")?this:e(this).each(function(){var t=e(this),i=t.data("image-width"),a=t.data("image-resolution"),n=t.find("li").filter(function(){return e(this).data("media-id")}).map(function(){return{"media-id":e(this).attr("data-media-id"),nonce:e(this).attr("data-nonce"),"regenerate-thumbnails":e(this)[0].hasAttribute("data-regenerate-thumbnails")}});n.length&&function(e,n){n=n||3;for(var o=0;o<e.length;o+=n)e.slice(o,o+n).forEach(function(e){wp.ajax.post("wpzoom_instagram_get_image_async",{"media-id":e["media-id"],nonce:e.nonce,"image-resolution":a,"image-width":i,"regenerate-thumbnails":e["regenerate-thumbnails"]}).done(function(i){t.find('li[data-media-id="'+e["media-id"]+'"] .zoom-instagram-link').css("background-image","url("+i.image_src+")")}).fail(function(){})})}(n.toArray(),3)})},e.fn.zoomLightbox=function(){return e(this).each(function(){var a=e(this).closest(".widget").find(".wpz-insta-lightbox-wrapper > .swiper");if(0===a.length&&(a=e(this).closest(".zoom-instagram").find(".wpz-insta-lightbox-wrapper > .swiper")),0===a.length&&(a=e(this).parent().parent().find(".wpz-insta-lightbox-wrapper > .swiper")),a.closest(".wpz-insta-lightbox-wrapper"),a.length>0&&"undefined"!=typeof Swiper){var n=function(t,i){var a=t.find(".wpz-insta-lightbox-tags");0!==a.length&&a.find(".wpz-insta-lightbox-tag").each(function(){var t=e(this),a=parseInt(t.attr("data-album-index"),10);-1===a||a===i?t.addClass("wpz-insta-lightbox-tag--visible"):t.removeClass("wpz-insta-lightbox-tag--visible")})},o=a.find(".image-wrapper > .swiper");new Swiper(a.get(0),i(i(i(i(i(i(i(i(i({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"autoHeight",!1),"watchOverflow",!0),"navigation",{nextEl:a.find("> .swiper-button-next").get(0),prevEl:a.find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{activeIndexChange:function(){var t=this.slides[this.activeIndex],i=e(t),a=i.find("video").get(0);a&&a.play(),"function"==typeof window.wpzInstaInitProductCarousel&&window.wpzInstaInitProductCarousel(i)}})),o.each(function(){var t=e(this),a=t.closest(".image-wrapper");new Swiper(t.get(0),i(i(i(i(i(i(i(i(i(i({lazy:{threshold:50},watchSlidesVisibility:!0,preloadImages:!1},"lazy",!0),"direction","horizontal"),"loop",!1),"spaceBetween",20),"nested",!0),"watchOverflow",!0),"pagination",{el:t.find("> .swiper-pagination").get(0),type:"bullets",clickable:!0,hideOnClick:!1}),"navigation",{nextEl:t.find("> .swiper-button-next").get(0),prevEl:t.find("> .swiper-button-prev").get(0)}),"keyboard",{enabled:!0,onlyInViewport:!0}),"on",{init:function(){n(a,0)},activeIndexChange:function(){var t=this.slides[this.activeIndex],i=e(t).find("video").get(0);i&&i.play(),n(a,this.activeIndex)}}))}),window.wpzInstaUpdateProductTagVisibility=n;var s=e(this).closest(".widget").find(".zoom-instagram-widget__items");0===s.length&&(s=e(this).closest(".zoom-instagram").find(".zoom-instagram-widget__items")),0===s.length&&(s=e(this)),s.find(".zoom-instagram-link").magnificPopup({items:{type:"inline",src:a.closest(".wpz-insta-lightbox-wrapper")},closeBtnInside:!1,mainClass:"wpzoom-lightbox",midClick:!0,callbacks:{open:function(){var i=e.magnificPopup.instance.st.el,a=this.content.find("> .swiper").get(0).swiper;this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+i.data("mfp-src")+'"] video')&&this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+i.data("mfp-src")+'"] video').trigger("play"),"object"===t(a)&&a.slideTo(this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+i.data("mfp-src")+'"]').index());var n=this.content.find('> .swiper > .swiper-wrapper > .swiper-slide[data-uid="'+i.data("mfp-src")+'"]');"function"==typeof window.wpzInstaInitProductCarousel&&window.wpzInstaInitProductCarousel(n)},afterClose:function(){a.find("video").each(function(){this.pause(),this.currentTime=0})}}}),s.find(".zoom-instagram-link").addClass("magnific-active")}})},window.wpzInstaInitProductCarousel=function(t){t.find(".wpz-insta-lightbox-product--carousel").each(function(){var t=e(this);if(!t.data("carousel-initialized")){var i=t.find(".wpz-insta-lightbox-product__carousel-inner"),a=i.find(".wpz-insta-lightbox-product__card"),n=t.find(".wpz-insta-lightbox-product__carousel-prev"),o=t.find(".wpz-insta-lightbox-product__carousel-next"),s=t.find(".wpz-insta-lightbox-product__carousel-dots");if(a.length<=1)return n.hide(),o.hide(),void s.hide();var r=0,d=a.length;s.empty();for(var l=function(t){var i=e('<span class="wpz-insta-lightbox-product__carousel-dot"></span>');0===t&&i.addClass("active"),i.on("click",function(){m(t)}),s.append(i)},c=0;c<d;c++)l(c);n.on("click",function(){r>0&&m(r-1)}),o.on("click",function(){r<d-1&&m(r+1)}),p(),t.data("carousel-initialized",!0)}function p(){i.css("transform","translateX(-"+100*r+"%)"),s.find(".wpz-insta-lightbox-product__carousel-dot").removeClass("active").eq(r).addClass("active"),n.prop("disabled",0===r),o.prop("disabled",r===d-1)}function m(t){t>=0&&t<d&&(r=t,p())}})},e.fn.zoomInstagramWidget=function(t){return e(this).each(function(){var i,a,n=e(this),o=t||{},s=n.data("images-per-row"),r=n.data("image-width"),d=n.data("image-spacing"),l=(n.data("image-lazy-loading"),n.width());l/r<s?(i=s,a=Math.floor((l-1-(s-1)*d)/s)):(i=Math.floor((l-1)/r),a=Math.floor((l-1-(i-1)*d)/i)),(o.onlyNewItems&&void 0!==o.startIndex?n.find("li").slice(o.startIndex):n.find("li")).each(function(t){var a=(o.onlyNewItems&&void 0!==o.startIndex?o.startIndex+t:t)+1;a%i==1?e(this).css("clear","left"):e(this).css("clear","none"),a%i==0?e(this).css("margin-right","0"):(e(this).css("margin-right",d+"px"),e(this).css("margin-bottom",d+"px"))}),n.find("a.zoom-instagram-link").css({width:a,height:a}),n.find("a.zoom-instagram-link-old").lazy(),n.find(".zoom-instagram-link-new").lazy(),n.removeClass("zoom-instagram-widget__items--no-js")})},e(window).on("resize orientationchange",function(){n||(n=!0,(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)})(s))}),e(".zoom-instagram-widget__items").each(function(){var t=e(this);t.hasClass("layout-masonry")&&"function"==typeof e.fn.masonry?t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()}),e(".zoom-instagram-widget__items").zoomLoadAsyncImages(),e('.zoom-instagram-widget__items[data-lightbox="1"]').zoomLightbox();var r=_.debounce(function(){var t=e(".zoom-instagram-widget__items");t.length&&(t.each(function(){var t=e(this);t.hasClass("layout-masonry")&&"function"==typeof e.fn.masonry?t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()}),e(".zoom-instagram-widget__items").zoomLoadAsyncImages())},1500);e(document).on("panels_setup_preview",r),e(document).on("wpz-insta:loaded-more",function(){o()}),e(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/widget",function(t){"wpzoom-elementor-instagram-widget.default"==t.data("widget_type")&&t.find(".zoom-instagram-widget__items").each(function(){var t=e(this);t.hasClass("layout-masonry")&&"function"==typeof e.fn.masonry?t.masonry({itemSelector:".zoom-instagram-widget__item",columnWidth:".masonry-items-sizer",percentPosition:!0,gutter:parseInt(t.data("spacing")||10)}):t.zoomInstagramWidget()})})})})}(jQuery),document.body.addEventListener("click",function(t){var i=t.target.closest(".wpz-insta-link-product-btn");if(i&&(t.preventDefault(),t.stopPropagation(),"function"==typeof window.parent.postMessage)){var e=i.closest(".zoom-instagram-widget__item"),a=e&&e.getAttribute("data-media-type")||"image",n="",o=e?e.querySelector("img.zoom-instagram-link"):null;o&&(n=o.getAttribute("src")||o.getAttribute("data-src")||""),window.parent.postMessage({action:"wpz-insta-open-product-link",mediaId:i.getAttribute("data-media-id")||"",feedId:i.getAttribute("data-feed-id")||"",productId:i.getAttribute("data-product-id")||"",mediaType:a,imageUrl:n},"*")}},!0)})();